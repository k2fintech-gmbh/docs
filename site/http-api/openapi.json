{"openapi":"3.1.0","info":{"title":"BIG - main","version":"1.0"},"components":{"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer"}},"schemas":{},"parameters":{}},"paths":{"/send-code":{"post":{"tags":["auth"],"summary":"Send OTP","operationId":"post_SendCodeHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"phoneNumber":{"type":"string","example":"+99999999999"}},"required":["phoneNumber"]}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/verify-code":{"post":{"tags":["auth"],"summary":"Verify OTP","operationId":"post_VerifyCodeHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"phoneNumber":{"type":"string","example":"+99901234567"},"code":{"type":"string","example":"000000"}},"required":["phoneNumber","code"]}}}},"responses":{"200":{"description":"OTP verification successful","content":{"application/json":{"schema":{"type":"object","properties":{"accessToken":{"type":"string","example":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJGLXl1Z01uN1A1d0RNYmpjcGVaN1AiLCJwaG9uZSI6MzQ2MjcwNjg0NzgsIm5iZiI6MTcwODgxNzY0OSwiZXhwIjoxNzExNDA5NjQ5LCJpYXQiOjE3MDg4MTc2NDl9.FAqILei0iXB0lAZP41hUYZTnLZcHQX2O560P9YM4QGQ"},"refreshToken":{"type":"string","example":"TnLZcHQX2O560P9YM4QGQ"},"profile":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}},"required":["accessToken","refreshToken","profile"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/public/upload":{"post":{"summary":"Upload a file","tags":["files"],"operationId":"post_UploadFileHandler","responses":{"200":{"description":"File uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","example":"https://dev.iambig.ai/public/zAE2h2mPSKjWwnxw8qxp4"}},"required":["url"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/public/{id}":{"get":{"summary":"retrieve a file by id","tags":["files"],"operationId":"get_RetrieveFileHandler","parameters":[{"schema":{"type":"string"},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"File retrieved successfully","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"404":{"description":"File not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"File not found"}},"required":["error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/avatar/{userId}":{"get":{"summary":"Get user avatar by userId","tags":["user"],"operationId":"get_GetAvatarHandler","parameters":[{"schema":{"type":"string"},"required":true,"name":"userId","in":"path"}],"responses":{"200":{"description":"Avatar retrieved successfully","content":{"application/json":{"schema":{"type":"string"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"404":{"description":"Avatar not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Avatar not found"}},"required":["error"]}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/auth/refresh":{"post":{"summary":"Refresh tokens","tags":["auth"],"security":[],"operationId":"post_RefreshTokenHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]}}}},"responses":{"200":{"description":"ok","content":{"application/json":{"schema":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}},"required":["accessToken","refreshToken"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/network":{"get":{"summary":"Network info","tags":["debug"],"security":[],"operationId":"get_NetworkInfoHandler","responses":{"200":{"description":"network info","content":{"application/json":{"schema":{"type":"object","properties":{}}}}}}}},"/deviceToken":{"post":{"tags":["device"],"summary":"Store device tokens with fingerprint (device id)","operationId":"post_StoreDeviceTokenHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"deviceToken":{"type":"string","description":"base64 encoded"},"tokenType":{"type":"string","enum":["ios-notification","ios-voip"],"default":"ios-notification"},"fingerprint":{"type":"string","description":"device id"}},"required":["deviceToken","fingerprint"]}}}},"responses":{"200":{"description":"ok","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/contacts/merged":{"get":{"tags":["contacts"],"summary":"Get Merged Contacts","description":"Fetches and merges contacts from various sources.","security":[{"BearerAuth":[]}],"operationId":"get_ContactsHandler","parameters":[{"schema":{"type":"boolean"},"required":false,"name":"includeChatList","in":"query"}],"responses":{"200":{"description":"Contact retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"contacts":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"},"lastSeen":{"type":"number","example":1719781200000}},"required":["id","phoneNumber"]}}},"required":["contacts"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/contacts":{"get":{"tags":["contacts"],"summary":"Get Merged Contacts","description":"Fetches and merges contacts from various sources.","security":[{"BearerAuth":[]}],"operationId":"get_ContactsHandler","parameters":[{"schema":{"type":"boolean"},"required":false,"name":"includeChatList","in":"query"}],"responses":{"200":{"description":"Contact retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"contacts":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"},"lastSeen":{"type":"number","example":1719781200000}},"required":["id","phoneNumber"]}}},"required":["contacts"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}},"post":{"tags":["contacts"],"summary":"Create a new contact","security":[{"BearerAuth":[]}],"operationId":"post_CreateContactHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"clientId":{"type":"string"},"phoneNumber":{"type":"string"},"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}},"required":["phoneNumber"]}}}},"responses":{"200":{"description":"Contact created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"result":{"type":"boolean"},"profile":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}},"required":["profile"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/contacts/whoIsThere":{"post":{"summary":"Find contacts by phone numbers","tags":["contacts"],"security":[{"BearerAuth":[]}],"operationId":"post_FindContactsHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"contacts":{"type":"array","items":{"type":"object","properties":{"phoneNumber":{"type":"string","example":"+79333333333"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"}},"required":["phoneNumber"]}}},"required":["contacts"]}}}},"responses":{"200":{"description":"Contacts found","content":{"application/json":{"schema":{"type":"object","properties":{"contacts":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"phoneNumber":{"type":"string"},"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"avatarUrl":{"type":"string"}},"required":["id","phoneNumber"]}}},"required":["contacts"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/contacts/v2/phones":{"post":{"tags":["Contacts"],"summary":"Register own contacts","security":[{"BearerAuth":[]}],"operationId":"post_RegisterOwnContactsHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"phoneNumbers":{"type":"array","items":{"type":"string","default":"+999"}}},"required":["phoneNumbers"]}}}},"responses":{"200":{"description":"Contacts registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"object"},"properties":{"type":"object","properties":{"success":{"type":"object","properties":{"type":{"type":"string","example":"boolean"}},"required":["type"]}},"required":["success"]}},"required":["type","properties"]}}}},"400":{"description":"Invalid input","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"object"},"properties":{"type":"object","properties":{"error":{"type":"object","properties":{"type":{"type":"string","example":"string"}},"required":["type"]}},"required":["error"]}},"required":["type","properties"]}}}}}}},"/contacts/findByPhoneNumber":{"post":{"tags":["contacts"],"summary":"Find user by phone number","security":[{"BearerAuth":[]}],"operationId":"post_FindUserByPhoneHandler","parameters":[{"schema":{"type":"string","description":"The phone number to search for"},"required":true,"description":"The phone number to search for","name":"phoneNumber","in":"query"}],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"username":{"type":"string"},"phoneNumber":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"avatarUrl":{"type":"string"}},"required":["id","username","phoneNumber"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"404":{"description":"User not found"},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/contacts/findByUsername":{"post":{"tags":["contacts"],"summary":"Find user by username","security":[{"BearerAuth":[]}],"operationId":"post_FindUserByUsernameHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","example":"akuz"}},"required":["username"]}}}},"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"404":{"description":"User not found"},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/profile/{id}":{"get":{"summary":"Get user profile","operationId":"user profule","tags":["contacts"],"security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"Profile fetched successfully","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/profile":{"get":{"summary":"Get own profile","tags":["profile"],"operationId":"own profile","security":[{"BearerAuth":[]}],"responses":{"200":{"description":"Profile fetched successfully","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}},"post":{"summary":"Update own profile","tags":["profile"],"security":[{"BearerAuth":[]}],"operationId":"post_UpdateProfileHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)"}}}}}},"responses":{"200":{"description":"Profile updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"weEEwwecw_wdx2"},"phoneNumber":{"type":"string","example":"+79333333333"},"username":{"type":"string","example":"@ask_uznetsov"},"firstName":{"type":"string","example":"Aleksandr"},"lastName":{"type":"string","example":"Ivanov"},"avatarUrl":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)","example":"https://dev.iambig.ai/public/1feb2e3c2d04dec268da0606dd163e76f6869233129be1633ab9937903640818"},"verified":{"type":"string","example":"true"}},"required":["id","phoneNumber"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/messages":{"post":{"tags":["messages"],"summary":"Send a chat message ","security":[{"BearerAuth":[]}],"operationId":"post_SendMessageHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"chatId":{"type":"string","example":"JC0TvKi3f2bIQtBcW1jIn"},"attachments":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["file","image","video"]},"id":{"type":"string"},"filename":{"type":"string"},"url":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)"},"meta":{"anyOf":[{"type":"object","properties":{"extension":{"type":"string"},"size":{"type":"number"}},"required":["extension","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"}},"required":["mimetype","width","height","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"},"duration":{"type":"number"}},"required":["mimetype","width","height","size","duration"]}]}},"required":["type","id","filename","url","meta"]}},"message":{"type":"string","example":"Hello, how are you?"},"clientMessageId":{"type":"string","example":"ldjkedlkedlk"},"replyTo":{"type":"number","example":1}},"required":["chatId"]}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"messageId":{"type":"number"},"timestamp":{"type":"number"}},"required":["messageId","timestamp"]}}}},"400":{"description":"Bad Request"},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"status":{"type":"string"}},"required":["error","status"]}}}}}},"get":{"summary":"Retrieve messages for a chat","tags":["messages"],"security":[{"BearerAuth":[]}],"operationId":"get_GetMessagesHandler","parameters":[{"schema":{"type":["string","null"],"description":"The ID of the chat"},"required":false,"description":"The ID of the chat","name":"chatId","in":"query"},{"schema":{"type":["number","null"],"maximum":500,"default":300,"description":"portion length"},"required":false,"description":"portion length","name":"count","in":"query"},{"schema":{"type":["number","null"],"description":"to id"},"required":false,"description":"to id","name":"endId","in":"query"},{"schema":{"type":["number","null"],"description":"from id"},"required":false,"description":"from id","name":"startId","in":"query"}],"responses":{"200":{"description":"Messages retrieved successfully","authors":{"_def":{"type":{"_def":{"unknownKeys":"strip","catchall":{"_def":{"typeName":"ZodNever"}},"typeName":"ZodObject"},"_cached":null},"minLength":null,"maxLength":null,"exactLength":null,"typeName":"ZodArray"}},"content":{"application/json":{"schema":{"type":"object","properties":{"messages":{"anyOf":[{"type":"array","items":{"type":"object","properties":{"messageId":{"type":"number"},"message":{"type":"string"},"sender":{"type":"string"},"attachments":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["file","image","video"]},"id":{"type":"string"},"filename":{"type":"string"},"url":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)"},"meta":{"anyOf":[{"type":"object","properties":{"extension":{"type":"string"},"size":{"type":"number"}},"required":["extension","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"}},"required":["mimetype","width","height","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"},"duration":{"type":"number"}},"required":["mimetype","width","height","size","duration"]}]}},"required":["type","id","filename","url","meta"]}},"read":{"type":"number"},"dlvrd":{"type":"number"},"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"deletedAt":{"type":"number"}},"required":["messageId","sender","createdAt"],"description":"DialogMessageSchema"}},{"type":"array","items":{"type":"object","properties":{"messageId":{"type":"number"},"message":{"type":"string"},"sender":{"type":"string"},"attachments":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["file","image","video"]},"id":{"type":"string"},"filename":{"type":"string"},"url":{"type":"string","pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)"},"meta":{"anyOf":[{"type":"object","properties":{"extension":{"type":"string"},"size":{"type":"number"}},"required":["extension","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"}},"required":["mimetype","width","height","size"]},{"type":"object","properties":{"mimetype":{"type":"string"},"width":{"type":"number"},"height":{"type":"number"},"size":{"type":"number"},"duration":{"type":"number"}},"required":["mimetype","width","height","size","duration"]}]}},"required":["type","id","filename","url","meta"]}},"delivering":{"type":"array","items":{"type":"object","properties":{"userId":{"type":"string"},"dlvrd":{"type":"number"},"read":{"type":"number"}},"required":["userId"]}},"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"deletedAt":{"type":"number"}},"required":["messageId","sender","createdAt"],"description":"GroupChatMessageSchema"}}],"description":"Dialog or groupchat messages"}},"required":["messages"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/chat":{"get":{"summary":"Retrieve chat info","tags":["chats"],"security":[{"BearerAuth":[]}],"operationId":"get_GetChatHandler","parameters":[{"schema":{"type":["string","null"],"description":"The ID of the chat"},"required":false,"description":"The ID of the chat","name":"chatId","in":"query"}],"responses":{"200":{"description":"Chat retrieved successfully","content":{"application/json":{"schema":{"anyOf":[{"type":"object","properties":{"chatId":{"type":"string"},"photoUrl":{"type":"string"},"type":{"type":"string","enum":["dialog","group","channel"]},"name":{"type":"string"},"lastMessageId":{"type":"number"},"lastMessageText":{"type":"string"},"lastMessageTime":{"type":"number"},"lastMessageAuthor":{"type":"string"},"lastMessageStatus":{"type":"string","enum":["read","unread","undelivered","deleted"]},"missed":{"type":"number"},"verified":{"type":"boolean"},"isMine":{"type":"boolean"},"attachmentType":{"type":"string","enum":["file","image","video"]},"participantCount":{"type":"number"},"meta":{"type":"object","properties":{"name":{"type":"string"},"owner":{"type":"string"},"participants":{"type":"array","items":{"type":"string"}},"createdAt":{"type":"number"}},"required":["name","owner","participants","createdAt"]}},"required":["chatId","type","name","missed","participantCount","meta"]},{"type":"object","properties":{"chatId":{"type":"string"},"photoUrl":{"type":"string"},"type":{"type":"string","enum":["dialog","group","channel"]},"name":{"type":"string"},"lastMessageId":{"type":"number"},"lastMessageText":{"type":"string"},"lastMessageTime":{"type":"number"},"lastMessageAuthor":{"type":"string"},"lastMessageStatus":{"type":"string","enum":["read","unread","undelivered","deleted"]},"missed":{"type":"number"},"verified":{"type":"boolean"},"isMine":{"type":"boolean"},"attachmentType":{"type":"string","enum":["file","image","video"]},"participantCount":{"type":"number"},"meta":{"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"username":{"type":"string"},"phoneNumber":{"type":"string"}}}},"required":["chatId","type","name","missed","participantCount","meta"]}]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/chats":{"get":{"summary":"Retrieve chat messages","tags":["chats"],"security":[{"BearerAuth":[]}],"operationId":"get_GetChatsHandler","responses":{"200":{"description":"Chat messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"chats":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["dialog","group","channel","favorites"],"example":"dialog"},"id":{"type":"string","example":"JC0TvKi3f2bIQtBcW1jIn"},"photoUrl":{"type":"string","example":"https://dev.iambig.ai/public/gb24ixCWLL25S-jtzYck7"},"name":{"type":"string","example":"Серёжа"},"lastMessageText":{"type":"string","example":"Hi"},"lastMessageTime":{"type":"number","example":1710436789},"lastMessageAuthor":{"type":"string","example":"Серёжа"},"lastMessageStatus":{"type":"string","enum":["read","unread","undelivered"]},"missed":{"type":"number","description":"missed messages count","example":1},"verified":{"type":"boolean"}},"required":["type","id","name","lastMessageText","lastMessageTime","lastMessageStatus"]}}},"required":["chats"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}},"post":{"tags":["chats"],"summary":"Create a new chat group","security":[{"BearerAuth":[]}],"operationId":"post_CreateChatHandler","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"imgUrl":{"type":"string","minLength":1,"pattern":"^(https:\\/\\/)?([\\w\\-\\.]*\\.iambig\\.ai)([\\/:?&#]{1}[\\da-z\\.-]+)*[\\/\\?]?$|(^$)"},"participants":{"type":"array","items":{"type":"string"}}},"required":["name","participants"]}}}},"responses":{"200":{"description":"Group chat created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"groupId":{"type":"string"},"name":{"type":"string"},"imgUrl":{"type":"object","properties":{}},"participants":{"type":"array","items":{"type":"string"}}},"required":["groupId","name","imgUrl","participants"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"array","items":{}},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":400,"description":"HTTP status code"}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Unauthorized"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":401,"description":"HTTP status code"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","default":"Something went wrong"},"timestamp":{"type":"number","default":0,"description":"Miilisconds since UNIX epoch"},"status":{"type":["number","null"],"default":500,"description":"HTTP status code"}}}}}}}}},"/blink":{"get":{"400":{"description":"Validation error","content":{"application/json":{"schema":{"_def":{"unknownKeys":"strip","catchall":{"_def":{"typeName":"ZodNever"}},"typeName":"ZodObject"},"_cached":null}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"_def":{"unknownKeys":"strip","catchall":{"_def":{"typeName":"ZodNever"}},"typeName":"ZodObject"},"_cached":null}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"_def":{"unknownKeys":"strip","catchall":{"_def":{"typeName":"ZodNever"}},"typeName":"ZodObject"},"_cached":null}}}},"tags":["Messaging"],"summary":"Blink - make all delivered","security":[{"BearerAuth":[]}],"operationId":"get_BlinkHandler","responses":{"200":{"description":"ok","content":{"application/json":{"schema":{"type":"object","properties":{}}}}}}}}},"webhooks":{}}